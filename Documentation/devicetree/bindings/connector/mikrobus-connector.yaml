# SPDX-License-Identifier: GPL-2.0 OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/connector/mikrobus-connector.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: mikroBUS add-on board connector

maintainers:
  - Ayush Singh <ayush@beagleboard.org>

properties:
  compatible:
    const: mikrobus-connector

  pinctrl-0: true
  pinctrl-1: true
  pinctrl-2: true
  pinctrl-3: true
  pinctrl-4: true
  pinctrl-5: true
  pinctrl-6: true
  pinctrl-7: true
  pinctrl-8: true

  pinctrl-names:
    minItems: 1
    maxItems: 9
    items:
      enum: [default, pwm_default, pwm_gpio, uart_default, uart_gpio, i2c_default, i2c_gpio, spi_default,
             spi_gpio]

  spi-controller:
    description: spi-controller of mikroBUS SPI pins along with cs pins.
    $ref: /schemas/types.yaml#/definitions/phandle

  spi-cs:
    description: spi chip-select corresponding to the chip-selects on the mikrobus socket.
    $ref: /schemas/types.yaml#/definitions/uint32-array

  spi-cs-names:
    minItems: 1
    maxItems: 12
    items:
      enum: [default, pwm, int, rx, tx, scl, sda, an, rst, sck, cipo, copi]

  i2c-controller:
    description: i2c controller attached to the mikrobus socket.
    $ref: /schemas/types.yaml#/definitions/phandle

  uart-controller:
    description: uart controller attached to the mikrobus socket
    $ref: /schemas/types.yaml#/definitions/phandle

  pwms:
    description: the pwm-controller corresponding to the mikroBUS PWM pin.
    maxItems: 1

  mikrobus-gpios:
    minItems: 1
    maxItems: 12

  mikrobus-gpio-names:
    minItems: 1
    maxItems: 12
    items:
      enum: [pwm, int, rx, tx, scl, sda, an, rst, cs, sck, cipo, copi]

  board:
    description: board attached to mikrobus connector
    $ref: /schemas/types.yaml#/definitions/phandle-array

required:
  - compatible
  - pinctrl-0

additionalProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    mikrobus {
      compatible = "mikrobus-connector";
      pinctrl-names = "default", "pwm_default", "pwm_gpio","uart_default", "uart_gpio", "i2c_default",
                      "i2c_gpio", "spi_default", "spi_gpio";
      pinctrl-0 = <&P2_03_gpio_input_pin &P1_04_gpio_pin &P1_02_gpio_pin>;
      pinctrl-1 = <&P2_01_pwm_pin>;
      pinctrl-2 = <&P2_01_gpio_pin>;
      pinctrl-3 = <&P2_05_uart_pin &P2_07_uart_pin>;
      pinctrl-4 = <&P2_05_gpio_pin &P2_07_gpio_pin>;
      pinctrl-5 = <&P2_09_i2c_pin &P2_11_i2c_pin>;
      pinctrl-6 = <&P2_09_gpio_pin &P2_11_gpio_pin>;
      pinctrl-7 = <&P1_12_spi_pin &P1_10_spi_pin &P1_08_spi_sclk_pin &P1_06_spi_cs_pin>;
      pinctrl-8 = <&P1_12_gpio_pin &P1_10_gpio_pin &P1_08_gpio_pin &P1_06_gpio_pin>;
      pwms = <&ehrpwm1 0 500000 0>;
      i2c-controller = <&i2c1>;
      uart-controller = <&uart1>;
      spi-controller = <&spi1>;
      spi-cs = <0 1>;
      spi-cs-names = "default", "rst";
      mikrobus-gpios = <&gpio1 18 GPIO_ACTIVE_HIGH>, <&gpio0 23 GPIO_ACTIVE_HIGH>,
                       <&gpio0 30 GPIO_ACTIVE_HIGH>, <&gpio0 31 GPIO_ACTIVE_HIGH>,
                       <&gpio0 15 GPIO_ACTIVE_HIGH>, <&gpio0 14 GPIO_ACTIVE_HIGH>,
                       <&gpio0 4 GPIO_ACTIVE_HIGH>, <&gpio0 3 GPIO_ACTIVE_HIGH>,
                       <&gpio0 2 GPIO_ACTIVE_HIGH>, <&gpio0 5 GPIO_ACTIVE_HIGH>,
                       <&gpio2 25 GPIO_ACTIVE_HIGH>, <&gpio2 3 GPIO_ACTIVE_HIGH>;
    };
